# === Build Settings ===
# These settings tell Netlify how to build your React frontend.
[build]
  # Tell Netlify to 'cd frontend' before doing anything
  base    = "frontend"
  
  # The command to build your React app (from within the 'frontend' folder)
  command = "npm run build"
  
  # The final, published site folder (relative to the 'base' folder)
  publish = "dist"
  
  # Where your serverless functions live (relative to the *root*)
  functions = "netlify/functions/"

# === Function-Specific Settings ===
# This block applies settings ONLY to our 'chat' function (chat.py)
[functions.chat]
  # This tells Netlify: "This 'chat' function is a Python function,
  # and you can find its dependencies in this file."
  # The path is relative to the *root* of the repo.
  python_requirements = "backend/requirements.txt"

# === Redirects ===
# This is our API proxy rule. It tells Netlify:
# "If the frontend calls '/api/chat', secretly pass that
# request to the 'chat.py' function."
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200